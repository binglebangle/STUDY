 # DNS와 작동원리
## DNS?
도메인 이름 시스템(Domain Name System) 또는 도메인 이름 서비스(Domain Name Service)의 약자
도메인 이름 체계 또는 도메인 이름을 실제 IP주소롤 바꾸는 시스템/서비스
> 특정 컴퓨터의 주소를 찾기위해서 사람이 이해하기 쉬운 도메인 이름을 숫자로 된 식별 번호(IP주소)로 변환해 준다.


### DNS 서버
웹 사이트의 데이터가 저장되어 있는 호스팅 서버는 인터넷 회선이 연결된 컴퓨터/장치이기 때문에 IP주소거 할당된다. 이것이 실제 웹사이트 주소라고 할 수 있다.   
이때 DNS서버는 IP주소를 특정 도메인 주소와 같다는 기록을 저장하고, 인터넷 사용자들이 도메인 주소를 검색했을때 IP주소로 연결되도록 해주는 역할을 한다.

<img src="https://gentlysallim.com/wp-content/uploads/2021/03/210111_02.jpg">

> 브라우저에서 naver.com을 검색했을때, DNS서버로 도메인 주소가 전달되고 서버 내부에서 도메인 주소를 토대로 IP주소를 가지고 있는 호스팅 서버로 연결해주면 브라우저가 IP주소로 접속해서 웹사이트가 보이는 원리이다.

### DNS서버 종류 구분
DNS서버도 최상위 도메인에서 개인 도메인의 서브 도메인까지 도메인 이름의 분류와 디렉토리/계층의 형태로 구분된다
<img src="https://gentlysallim.com/wp-content/uploads/2021/03/210111_03.jpg">

- Root DNS Server: ICANIN이 직접 관리하는 서버.   TLD DNS서버의 IP주소를 저장하고 안내하는 서버
> >TLD DNS: 최상위 도메인   도메인을 구분하는 가장 큰 카테고리로 ICANIN이 직접관리한다.   
> > com, net, org, co.kr, ac.kr 등이 있다.
- TLD DNS Server: 도메인 등록 기관이 관리하는 서버.   Authoritative DNS 서버주소를 저장하고 안내하는 역할을 한다.
> >Authoritative DNS: 실제 개인 도메인과 IP주소의 관계를 기록,저장,변경되는 기능
- Authoritative DNS Server: 실제 개인 도메인과 IP주소의 관계가 기록, 저장, 변경되는 서버.
- Recursive DNS Server: 여러 DNS 서버를 한번 거친 후 얻은 데이터를 일정기간동안 캐시라는 형태로 저장해두는 서버   인터넷 사용자가 가장 먼저 접근하는 DNS서버이다.
> > 예시로 KT,SK,LG와 같은 통신사 DNS서버가 있음   
> > 캐시 : 한번 처리 한 작업을 보존해서 속도와 비용을 절감한는 행위   요청이 들어올때마다 다른 서버에 방문할 필요없이 임시적으로 저장된 캐시를 이용하여 시간, 네트워크 트래픽의 부담을 줄여준다.

## 동작원리
<img src="https://gentlysallim.com/wp-content/uploads/2021/03/210111_03_2.jpg">

1. 브라우저에서 원하는 사이트를 검색하고 통신사 DNS 서버에 도메인 주소에 해당하는 IP주소를 요청함
2. ISP 서버(통신사 서버)에서 캐시 데이터가 없다는것을 확인하고 Root DNS서버에게 어디로 가야하는지 요청함   (만약 캐시가 있다면 8번으로 바로 진행)
3.  .com 도메인을 검토하고 com 최상위 도메인을 관리하는 TLD DNS서버주소로 안내함   (Root DNS서버는 최상위 DNS 서버주소만 관리힘)
4. 통신사 서버는 com서버에게 어디로 가야하는지 다시 요청함.
5. com 서버는 가비아 DNS서버에서 해당 도메인이 관리되고 있는 것 확인하고 안내함
6. 통신사 서버는 가비아 서버에게 다시 요청
7. 가비아 서버는 "-----.com==12.123.123.123"이라는 정보를 확인 후 해당 IP를 알려줌   동시에 통신사 서버는 해당 정보를 캐시로 저장
8. 통신사 서버는 브라우저에서 알아낸 IP주소를 안내함
9. 브라우저는 찾아낸 IP 주소를 갖고있는 호스팅 서버에게 웹사이트 출력을 요청
10. 화면창에 출력됨

